/* =========================================
   CRITICAL MOBILE FIX (Docs overflow + TOC)
   Paste at very end of globals.css
   ========================================= */

/* 1) Prevent grid children from forcing overflow (key fix) */
.docs-grid {
  /* the minmax(0, ..) is essential to allow shrinking */
  grid-template-columns: minmax(0, 0.8fr) minmax(0, 1.2fr);
}

.docs-grid > * {
  min-width: 0;
}

/* 2) Ensure all nested blocks can shrink */
.toc-shell,
.stack,
.doc-card,
.panel,
.panel-inner,
pre,
code {
  min-width: 0;
}

/* 3) iOS/Safari: avoid weird button/select-like rendering and layout glitches */
.toc-toggle {
  -webkit-appearance: none;
  appearance: none;
  text-align: left;
  gap: 10px;
}

/* 4) Make TOC actually toggle on mobile (since you already have tocOpen state) */
@media (max-width: 980px) {
  .toc {
    display: none;
  }
  .toc-shell.open .toc {
    display: block;
  }
}

/* 5) Mobile code: WRAP lines instead of forcing horizontal overflow */
@media (max-width: 720px) {
  pre {
    overflow-x: hidden; /* important: let text wrap instead of pushing layout */
  }

  pre code {
    white-space: pre-wrap;   /* wrap long lines */
    word-break: break-word;  /* break long tokens */
    overflow-wrap: anywhere;
  }
}

/* 6) Safety: never allow accidental page-wide horizontal scroll */
html,
body {
  overflow-x: hidden;
}
